<!DOCTYPE html>
<!-- Document type declaration -->
<html lang="en">
<head>
    <!-- Page metadata -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title shown in browser tab -->
    <title>Let's Read Some Music</title>
    <!-- Load Font Awesome for icons (gear, fire, speedometer, etc.) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <!-- Wrapper for game and controls -->
    <div class="container">

        <!-- Main game area -->
        <div id="game-container">

            <!-- Top bar: player profile, streak, speed, record, level info -->
            <div id="game-top-bar">

                <!-- Left: Profile name and stats -->
                <div id="profile-section">
                    <!-- Display current player name -->
                    <div id="profile-name-display">
                        <span id="profile-name">Player 1</span>
                    </div>

                    <!-- Streak indicator (consecutive correct answers) -->
                    <div id="streak-display" class="top-stats">
                        <div class="stats-icon"><i class="fas fa-fire"></i></div>
                        <div class="stats-info">
                          <div class="stats-label">Streak</div>
                          <div id="streak-value" class="stats-value">0</div>
                      </div>
                  </div>

                    <!-- Speed indicator (seconds per note) -->
                    <div id="speed-display" class="top-stats">
                        <div class="stats-icon"><i class="fas fa-tachometer-alt"></i></div>
                        <div class="stats-info">
                            <div class="stats-label">Speed</div>
                            <div id="speed-value" class="stats-value">0.0</div><span class="stats-unit">s/note</span>
                        </div>
                   </div>

                   <!-- Record indicator (best performance) -->
                   <div id="record-display" class="top-stats">
                       <div class="stats-icon"><i class="fas fa-medal"></i></div>
                       <div class="stats-info">
                           <div class="stats-label">Record</div>
                           <div id="record-value" class="stats-value">-</div>
                       </div>
                   </div>
               </div>
               
                <!-- Right: Level name and goal requirements -->
                <div id="level-section">
                    <!-- Current level title -->
                    <div id="level-name-display"><span id="level-name">-</span></div>
                    
                    <!-- Level goal: required streak and speed -->
                    <div id="level-requirements" class="top-goal">
                        <div class="goal-title"><i class="fas fa-trophy"></i> Goal:</div>
                        <div class="goal-details">
                            <span id="streak-required">0</span> in a row under <span id="speed-required">0</span>s
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Staff rendering area (VexFlow or other) -->
            <div id="sheet-music"></div>
            <!-- Buttons for selecting note names -->
            <div id="note-options"></div>
            
            <!-- Feedback section: shows correct/wrong and celebrations -->
            <div id="feedback-container">
                <div id="feedback"></div>
                <div class="celebration-container"></div>
            </div>
        </div>

        <!-- Control buttons below the game -->
        <div id="controls">
            <!-- Starts or restarts the game -->
            <button id="start-button">Start Game</button>
            <!-- Opens settings/stats popup -->
            <button id="stats-button" class="icon-button" title="Settings">
                <i class="fas fa-cog"></i>
            </button>
            <!-- Link to a separate tutorial/help page -->
            <a href="tutorial.html" target="_blank" class="button-style-link">Help</a>
        </div>
    </div>

    <!-- Settings & stats popup (hidden by default) -->
    <div id="stats-popup" class="popup">
        <div class="popup-content">
            <!-- Close button for the popup -->
            <span class="close-button">&times;</span>
            <h2>Game Settings</h2>
            
            <!-- Profile management: create/switch players -->
            <div class="stats-section">
                <h3>Profiles</h3>
                <div id="profiles-section">
                    <div id="profiles-list" class="profiles-list">
                        <!-- List of saved profiles dynamically inserted here -->
                    </div>
                    <div class="profile-actions">
                        <div class="profile-add">
                            <!-- Input + button to add a new profile -->
                            <input type="text" id="new-profile-name" placeholder="New profile name">
                            <button id="add-profile-button">Add Profile</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- General settings like toggles and reset -->
            <div class="stats-section">
                <h3>Settings</h3>
                <div class="settings-controls">
                    <div class="toggle-buttons">
                        <button id="toggle-names-button" class="toggle-button">Show Note Names</button>
                        <button id="toggle-all-keys-button" class="toggle-button">Show All Notes</button>
                        <button id="reset-button" class="toggle-button">Reset Progress</button>
                    </div>
                    <!-- Clears all stored profiles/data -->
                    <button id="clear-storage-button" class="toggle-button danger">Clear All Profiles</button>
                </div>
            </div>
            
            <!-- Allows selecting different levels -->
            <div class="stats-section">
                <h3>Level Selection</h3>
                <div id="level-selection" class="level-selection">
                    <!-- Level buttons generated dynamically -->
                </div>
            </div>
            
            <!-- Displays notes the player has learned -->
            <div class="stats-section">
                <h3>Learned Notes</h3>
                <div id="learned-notes-list" class="stats-list"></div>
            </div>
            
            <!-- Shows progress across all levels -->
            <div class="stats-section">
                <h3>Level Progression</h3>
                <div id="levels-list" class="stats-list"></div>
            </div>
        </div>
    </div>
    
    <!-- Error modal for critical messages -->
    <div id="error-modal" class="error-modal">
        <div class="error-modal-content">
            <span class="error-modal-close">&times;</span>
            <div id="error-message" class="error-message"></div>
            <button id="error-modal-button" class="error-modal-button">Continue</button>
        </div>
    </div>
    
    <!-- Placeholder: Webpack or other bundler will inject compiled scripts here -->
</body>
</html>
